---
layout: post
title: MySQL-02-事务隔离
categories: [MySQL]
description: MySQL 事务隔离以及隔离级别基础
keywords: ACID 隔离级别
---

## 事务
事务就是一组SQL语句，作为一个工作单元以原子方式进行处理。如果数据库引擎能够成功地对数据库应用整组语句，那么就执行该组语句。如果其中有任何一条语句因为崩溃或其他原因无法执行，那么整组语句都不执行。也就是说，作为事务的一组语句，要么全部执行成功，要么全部执行失败。
ACID代表原子性(atomicity)、一致性(consistency)、隔离性(isolation)和持久性(durability)

## 隔离性和隔离级别
#### 隔离性
通常来说，一个事务所做的修改在最终提交以前，对其他事务是不可见的，这就是隔离性带来的结果。在前面的例子中，当执行完第3条语句、第4条语句还未开始时，此时有另外一个账户汇总程序开始运行，其看到的支票账户的余额并没有被减去200美元。后面我们讨论隔离级别(isolation level)的时候，会发现为什么我们要说“通常来说”是不可见的。

### 隔离级别
多个事务同时执行的时候，可能出现的问题：
* 脏读
* 不可重复读
* 幻读
为了解决这些问题，就有了“隔离级别”的概念。
SQL标准的事务隔离级别有：
* 读未提交（read uncommitted）
	一个事务还没提交时，它的变更就能被别的事务看到。
* 读提交（read committed）
	一个事务提交后，它的变更才会被其他事务看到。
	这个级别仍然允许不可重复读(nonrepeatable read)，这意味着同一事务中两次执行相同语句，可能会看到不同的数据结果。
* 可重复读（repeatable read）
	一个事务执行过程中看到的数据，总是跟这个事务在启动时看到的数据是一致的。当然在可重复读隔离级别下，未提交变更对其他事务也是不可见的。
* 串行化（serializable）
	顾名思义是对于同一行记录，“写”会加“写锁”，“读”会加“读锁”。当出现读写锁冲突的时候，后访问的事务必须等前一个事务执行完成，才能继续执行。
